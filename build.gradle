/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

apply plugin: 'idea'

subprojects {
    apply plugin: 'scala'

    group = 'com.skt'
    version = '0.1'
    sourceCompatibility = 1.8

    repositories {
        mavenCentral()
    }

    ext {
        scalaVersion = "2.12"
        scalaVersionWithMinor = "2.12.8"
        scalaTestVersion = "3.0.5"
        slf4jVersion = "1.7.25"
        log4jVersion = "1.2.17"
        jarDir = "distribution"
        getDate = { ->
            new Date().format('yyyy_MM_dd_HH_mm')
        }
    }

    dependencies {
        compile group: 'org.scala-lang', name: 'scala-library', version: "$scalaVersionWithMinor"
        compile "org.slf4j:slf4j-log4j12:$slf4jVersion"
        compile "log4j:log4j:$log4jVersion"

        testCompile "org.scalatest:scalatest_$scalaVersion:$scalaTestVersion"
    }

    task testScala(dependsOn: ["testClasses"], type: JavaExec) {
        main = "org.scalatest.tools.Runner"
        args = ["-R", "build/classes/scala/test", "-o"]
        classpath = sourceSets.test.runtimeClasspath
    }

    test.dependsOn testScala
}